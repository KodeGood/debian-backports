.\" Automatically generated by Pandoc 3.1.11.1
.\"
.TH "AVIFENC" "1" "2022\-04\-30" "libavif 1.2.0" "General Commands Manual"
.SH NAME
avifenc \- compress an image file to an AVIF file
.SH SYNOPSIS
\f[B]avifenc\f[R] [\f[I]options\f[R]]
\f[I]input.\f[R][\f[I]jpg\f[R]|\f[I]jpeg\f[R]|\f[I]png\f[R]|\f[I]y4m\f[R]]
\f[I]output.avif\f[R]
.SH DESCRIPTION
\f[B]avifenc\f[R] compresses an image file to an AVIF file.
Input format can be either JPEG, PNG or YUV4MPEG2 (Y4M).
.SH OPTIONS
.TP
\f[B]\-h\f[R], \f[B]\-\-help\f[R]
Show syntax help.
.TP
\f[B]\-V\f[R], \f[B]\-\-version\f[R]
Show the version number.
.SS BASIC OPTIONS
.TP
\f[B]\-q\f[R], \f[B]\-\-qcolor\f[R] \f[I]Q\f[R]
Quality for color in 0..100 where 100 is lossless.
.TP
\f[B]\-\-qalpha\f[R] \f[I]Q\f[R]
Quality for alpha in 0..100 where 100 is lossless.
.TP
\f[B]\-s\f[R], \f[B]\-\-speed\f[R] \f[I]S\f[R]
Encoder speed in 0..10 where 0 is the slowest, 10 is the fastest.
Or `default' or `d' for codec internal defaults.
(Default: 6).
.SS ADVANCED OPTIONS
.TP
\f[B]\-j\f[R], \f[B]\-\-jobs\f[R] \f[I]J\f[R]
Number of jobs (worker threads), or `all' to potentially use as many
cores as possible.
(Default: all).
.TP
\f[B]\-\-no\-overwrite\f[R]
Never overwrite existing output file.
.TP
\f[B]\-o\f[R], \f[B]\-\-output\f[R] \f[I]FILENAME\f[R]
Instead of using the last filename given as output, use this filename.
.TP
\f[B]\-l\f[R], \f[B]\-\-lossless\f[R]
Set all defaults to encode losslessly, and emit warnings when
settings/input don\[cq]t allow for it.
.TP
\f[B]\-d\f[R], \f[B]\-\-depth\f[R] \f[I]D\f[R]
Output depth, one of 8, 10 or 12.
(JPEG/PNG only; For y4m or stdin, depth is retained).
.TP
\f[B]\-y\f[R], \f[B]\-\-yuv\f[R] \f[I]FORMAT\f[R]
Output format, one of `auto' (default), 444, 422, 420 or 400.
Ignored for y4m or stdin (y4m format is retained).
.RS
.PP
For JPEG, auto honors the JPEG\[cq]s internal format, if possible.
For grayscale PNG, auto defaults to 400.
.PD 0
.P
.PD
For all other cases, auto defaults to 444.
.RE
.TP
\f[B]\-p\f[R], \f[B]\-\-premultiply\f[R]
Premultiply color by the alpha channel and signal this in the AVIF.
.TP
\f[B]\-\-sharpyuv\f[R]
Use sharp RGB to YUV420 conversion (if supported).
Ignored for y4m or if output is not 420.
.TP
\f[B]\-\-stdin\f[R]
Read y4m frames from stdin instead of files; no input filenames allowed,
must set before offering output filename.
.TP
\f[B]\-\-cicp\f[R], \f[B]\-\-nclx\f[R] \f[I]P\f[R]/\f[I]T\f[R]/\f[I]M\f[R]
Set CICP values (nclx colr box) (3 raw numbers, use \f[B]\-r\f[R] to set
range flag).
.RS
.IP \[bu] 2
\f[I]P\f[R] = color primaries
.IP \[bu] 2
\f[I]T\f[R] = transfer characteristics
.IP \[bu] 2
\f[I]M\f[R] = matrix coefficients
.PP
Use 2 for any you wish to leave unspecified.
.RE
.TP
\f[B]\-r\f[R], \f[B]\-\-range\f[R] \f[I]RANGE\f[R]
YUV range, one of `limited' or `l', `full' or `f'.
(JPEG/PNG only, default: full; For y4m or stdin, range is retained).
.TP
\f[B]\-\-target\-size\f[R] \f[I]S\f[R]
Set target file size in bytes (up to 7 times slower)
.TP
\f[B]\-\-progressive\f[R]
EXPERIMENTAL: Auto set parameters to encode a simple layered image
supporting progressive rendering from a single input frame.
.TP
\f[B]\-\-layered\f[R]
EXPERIMENTAL: Encode a layered AVIF.
Each input is encoded as one layer and at most 4 layers can be encoded.
.TP
\f[B]\-g\f[R], \f[B]\-\-grid\f[R] \f[I]MxN\f[R]
Encode a single\-image grid AVIF with M cols & N rows.
Either supply MxN identical W/H/D images, or a single image that can be
evenly split into the MxN grid and follow AVIF grid image restrictions.
The grid will adopt the color profile of the first image supplied.
.TP
\f[B]\-c\f[R], \f[B]\-\-codec\f[R] \f[I]C\f[R]
Codec to use.
.RS
.PP
Possible values depend on the codecs enabled at build time (see
\f[B]\-\-help\f[R] or \f[B]\-\-version\f[R] for the available codecs).
Default is auto\-selected from the available codecs.
.TP
Possible values are:
.IP \[bu] 2
\f[B]aom\f[R]
.IP \[bu] 2
\f[B]rav1e\f[R]
.IP \[bu] 2
\f[B]svt\f[R]
.RE
.TP
\f[B]\-\-exif\f[R] \f[I]FILENAME\f[R]
Provide an Exif metadata payload to be associated with the primary item
(implies \-\-ignore\-exif).
.TP
\f[B]\-\-xmp\f[R] \f[I]FILENAME\f[R]
Provide an XMP metadata payload to be associated with the primary item
(implies \-\-ignore\-xmp).
.TP
\f[B]\-\-icc\f[R] \f[I]FILENAME\f[R]
Provide an ICC profile payload to be associated with the primary item
(implies \-\-ignore\-icc).
.TP
\f[B]\-\-timescale\f[R], \f[B]\-\-fps\f[R] \f[I]V\f[R]
Timescale for image sequences.
If all frames are 1 timescale in length, this is equivalent to frames
per second.
(Default: 30) If neither duration nor timescale are set, avifenc will
attempt to use the framerate stored in a y4m header, if present.
.TP
\f[B]\-k\f[R], \f[B]\-\-keyframe\f[R] \f[I]INTERVAL\f[R]
Maximum keyframe interval for image sequences (any set of
\f[I]INTERVAL\f[R] consecutive frames will have at least one keyframe).
Set to 0 to disable (default).
.TP
\f[B]\-\-ignore\-exif\f[R]
If the input file contains embedded Exif metadata, ignore it (no\-op if
absent).
.TP
\f[B]\-\-ignore\-xmp\f[R]
If the input file contains embedded XMP metadata, ignore it (no\-op if
absent).
.TP
\f[B]\-\-ignore\-profile\f[R], \f[B]\-\-ignore\-icc\f[R]
If the input file contains an embedded color profile, ignore it (no\-op
if absent).
.TP
\f[B]\-\-ignore\-gain\-map\f[R]
If the input file contains an embedded gain map, ignore it (no\-op if
absent).
.TP
\f[B]\-\-qgain\-map\f[R] \f[I]Q\f[R]
Quality for the gain map in 0..100 where 100 is lossless.
.TP
\f[B]\-\-pasp\f[R] \f[I]H\f[R],\f[I]V\f[R]
Add pasp property (aspect ratio).
H=horizontal spacing, V=vertical spacing.
.TP
\f[B]\-\-crop\f[R] \f[I]CROPX\f[R],\f[I]CROPY\f[R],\f[I]CROPW\f[R],\f[I]CROPH\f[R]
Add clap property (clean aperture), but calculated from a crop
rectangle.
.TP
\f[B]\-\-clap\f[R] \f[I]WN\f[R],\f[I]WD\f[R],\f[I]HN\f[R],\f[I]HD\f[R],\f[I]HON\f[R],\f[I]HOD\f[R],\f[I]VON\f[R],\f[I]VOD\f[R]
Add clap property (clean aperture).
Width, Height, HOffset, VOffset (in numerator/denominator pairs).
.TP
\f[B]\-\-irot\f[R] \f[I]ANGLE\f[R]
Add irot property (rotation) in 0..3.
Makes (90 * ANGLE) degree rotation anti\-clockwise.
.TP
\f[B]\-\-imir\f[R] \f[I]AXIS\f[R]
Add imir property (mirroring).
0=top\-to\-bottom, 1=left\-to\-right.
.TP
\f[B]\-\-clli\f[R] \f[I]MaxCLL\f[R],\f[I]MaxPALL\f[R]
Add clli property (content light level information).
.TP
\f[B]\-\-repetition\-count\f[R] \f[I]N\f[R]
Number of times an animated image sequence will be repeated, or
`infinite' for infinite repetitions.
(Default: infinite).
.TP
\f[B]\-\-\f[R]
Signal the end of options.
Everything after this is interpreted as file names.
.SS UPDATABLE OPTIONS
The following options can optionally have a \f[B]:u\f[R] (or
\f[B]:update\f[R]) suffix like \f[B]\-q:u \f[BI]Q\f[B]\f[R], to apply
only to input files appearing after the option:
.TP
\f[B]\-q\f[R], \f[B]\-\-qcolor\f[R] \f[I]Q\f[R]
Quality for color in 0..100 where 100 is lossless.
.TP
\f[B]\-\-qalpha\f[R] \f[I]Q\f[R]
Quality for alpha in 0..100 where 100 is lossless.
.TP
\f[B]\-\-qgain\-map\f[R] \f[I]Q\f[R]
Quality for the gain map in 0..100 where 100 is lossless.
.TP
\f[B]\-\-tilerowslog2\f[R] \f[I]R\f[R]
log2 of number of tile rows in 0..6.
(Default: 0).
.TP
\f[B]\-\-tilecolslog2\f[R] \f[I]C\f[R]
log2 of number of tile columns in 0..6.
(Default: 0).
.TP
\f[B]\-\-autotiling\f[R]
Set \-\-tilerowslog2 and \-\-tilecolslog2 automatically.
.TP
\f[B]\-\-scaling\-mode\f[R] \f[I]N\f[R][/\f[I]D\f[R]]
EXPERIMENTAL: Set frame (layer) scaling mode as given fraction.
If omitted, the denominator defaults to 1.
(Default: 1/1).
.TP
\f[B]\-\-duration\f[R] \f[I]D\f[R]
Frame durations (in timescales) (default: 1).
This option always applies to following inputs with or without the
\f[CR]:u\f[R] suffix.
.TP
\f[B]\-a\f[R], \f[B]\-\-advanced\f[R] \f[I]KEY\f[R][=\f[I]VALUE\f[R]]
Pass an advanced, codec\-specific key/value string pair directly to the
codec.
avifenc will warn on any not used by the codec.
.SS AOM\-SPECIFIC ADVANCED OPTIONS
.IP "1." 3
\f[B]\f[BI]<key>\f[B]=\f[BI]<value>\f[B]\f[R] applies to both the color
(YUV) planes and the alpha plane (if present).
.IP "2." 3
\f[B]color:\f[BI]<key>\f[B]=\f[BI]<value>\f[B]\f[R] or
\f[B]c:\f[BI]<key>\f[B]=\f[BI]<value>\f[B]\f[R] applies only to the
color (YUV) planes.
.IP "3." 3
\f[B]alpha:\f[BI]<key>\f[B]=\f[BI]<value>\f[B]\f[R] or
\f[B]a:\f[BI]<key>\f[B]=\f[BI]<value>\f[B]\f[R] applies only to the
alpha plane (if present).
Since the alpha plane is encoded as a monochrome image, the options that
refer to the chroma planes, such as enable\-chroma\-deltaq=B, should not
be used with the alpha plane.
In addition, the film grain options are unlikely to make sense for the
alpha plane.
.PP
When used with libaom 3.0.0 or later, any key\-value pairs supported by
the aom_codec_set_option() function can be used.
When used with libaom 2.0.x or older, the following key\-value pairs can
be used:
.TP
\f[B]aq\-mode=\f[BI]M\f[B]\f[R]
Adaptive quantization mode.
0=off (default), 1=variance, 2=complexity, 3=cyclic refresh.
.TP
\f[B]cq\-level=\f[BI]Q\f[B]\f[R]
Constant/Constrained Quality level in 0..63, end\-usage must be set to
cq or q.
.TP
\f[B]enable\-chroma\-deltaq=\f[BI]B\f[B]\f[R]
Enable delta quantization in chroma planes.
0=disable (default), 1=enable.
.TP
\f[B]end\-usage=\f[BI]MODE\f[B]\f[R]
Rate control mode, one of `vbr', `cbr', `cq', or `q'
.TP
\f[B]sharpness=\f[BI]S\f[B]\f[R]
Bias towards block sharpness in rate\-distortion optimization of
transform coefficients in 0..7.
(Default: 0).
.TP
\f[B]tune=\f[BI]METRIC\f[B]\f[R]
Tune the encoder for distortion metric, one of `psnr' or `ssim'.
(Default: psnr).
.TP
\f[B]film\-grain\-test=\f[BI]TEST\f[B]\f[R]
Film grain test vectors in 0..16.
0=none (default), 1=test1, 2=test2, \&...
16=test16.
.TP
\f[B]film\-grain\-table=\f[BI]FILENAME\f[B]\f[R]
Path to file containing film grain parameters.
.SH EXAMPLES
.TP
Compress a PNG file to an AVIF file:
$ \f[B]avifenc input.png output.avif\f[R]
.SH REPORTING BUGS
.TP
Bugs can be reported on GitHub at:
\c
.UR https://github.com/AOMediaCodec/libavif/issues
.UE \c
.SH SEE ALSO
\f[B]avifdec\f[R](1)
